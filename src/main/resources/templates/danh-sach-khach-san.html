<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:replace="~{layout/main :: layout(~{::title}, ~{::main})}">
<head>
    <title>Danh sách Khách sạn - Quản Lý Khách Sạn</title>
</head>
<body>
    <main>
        <div class="container py-4">
            <h2 class="text-center mb-4">Các Khách sạn tìm thấy</h2>
            
            <div class="row">
                <!-- Bộ lọc -->
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-filter me-2"></i>Chọn lọc theo</h5>
                        </div>
                        <div class="card-body">
                            <form id="filterForm">
                                <!-- Xếp hạng -->
                                <div class="mb-4">
                                    <h6 class="fw-bold">Xếp hạng</h6>
                                    <div class="form-check" th:each="i : ${#numbers.sequence(0, 5)}">
                                        <input class="form-check-input filter-checkbox" type="checkbox" 
                                               th:id="'rating-' + ${i}" th:value="${i}" name="danhGia">
                                        <label class="form-check-label" th:for="'rating-' + ${i}">
                                            <span th:if="${i == 0}">Không xếp hạng</span>
                                            <span th:if="${i > 0}" th:text="${i} + ' Sao'">1 Sao</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Loại khách sạn -->
                                <div class="mb-4" th:if="${danhSachLoaiKhachSan != null}">
                                    <h6 class="fw-bold">Loại khách sạn</h6>
                                    <div class="form-check" th:each="loai : ${danhSachLoaiKhachSan}">
                                        <input class="form-check-input filter-checkbox" type="checkbox" 
                                               th:id="'type-' + ${loai.id}" th:value="${loai.ten}" name="loaiKhachSan">
                                        <label class="form-check-label" th:for="'type-' + ${loai.id}" th:text="${loai.ten}">
                                            Loại khách sạn
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Bữa ăn -->
                                <div class="mb-4" th:if="${danhSachBuaAn != null}">
                                    <h6 class="fw-bold">Bữa ăn</h6>
                                    <div class="form-check" th:each="buaAn : ${danhSachBuaAn}">
                                        <input class="form-check-input filter-checkbox" type="checkbox" 
                                               th:id="'meal-' + ${buaAn.id}" th:value="${buaAn.id}" name="buaAn">
                                        <label class="form-check-label" th:for="'meal-' + ${buaAn.id}" th:text="${buaAn.ten}">
                                            Bữa ăn
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Cách trung tâm -->
                                <div class="mb-4">
                                    <h6 class="fw-bold">Cách trung tâm</h6>
                                    <div class="form-check">
                                        <input class="form-check-input filter-checkbox" type="checkbox" id="distance-0" value="0" name="cachTrungTam">
                                        <label class="form-check-label" for="distance-0">Dưới 1 Km</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input filter-checkbox" type="checkbox" id="distance-1" value="1" name="cachTrungTam">
                                        <label class="form-check-label" for="distance-1">Dưới 3 Km</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input filter-checkbox" type="checkbox" id="distance-2" value="2" name="cachTrungTam">
                                        <label class="form-check-label" for="distance-2">Dưới 5 Km</label>
                                    </div>
                                </div>
                                
                                <!-- Giáp biển -->
                                <div class="mb-4">
                                    <h6 class="fw-bold">Giáp biển</h6>
                                    <div class="form-check">
                                        <input class="form-check-input filter-checkbox" type="checkbox" id="beach-false" value="false" name="giapBien">
                                        <label class="form-check-label" for="beach-false">Không giáp</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input filter-checkbox" type="checkbox" id="beach-true" value="true" name="giapBien">
                                        <label class="form-check-label" for="beach-true">Có giáp</label>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Danh sách khách sạn -->
                <div class="col-md-9">
                    <div id="hotelList">
                        <div class="row" th:if="${danhSachKhachSan != null and !danhSachKhachSan.empty}">
                            <div class="col-12 mb-4" th:each="khachSan : ${danhSachKhachSan}">
                                <a th:href="@{/khach-san/{id}(id=${khachSan.id})}" class="text-decoration-none">
                                    <div class="card card-hover">
                                        <div class="row g-0">
                                            <div class="col-md-4">
                                                <img th:src="@{'/images/KhachSan/' + ${khachSan.id} + '.jpg'}" 
                                                     class="img-fluid rounded-start h-100" alt="Khách sạn" style="object-fit: cover;">
                                            </div>
                                            <div class="col-md-8">
                                                <div class="card-body">
                                                    <div class="d-flex justify-content-between align-items-start">
                                                        <div>
                                                            <h5 class="card-title text-primary" th:text="${khachSan.ten}">Tên khách sạn</h5>
                                                            <p class="text-muted mb-2">
                                                                <i class="fas fa-map-marker-alt me-1"></i>
                                                                <span class="fw-bold text-success" th:text="${khachSan.tenThanhPho}">Thành phố</span>
                                                                - Cách trung tâm: <span th:text="${khachSan.cachTrungTam}">0</span>m
                                                            </p>
                                                            <p class="text-muted mb-2" th:text="${khachSan.tenLoaiKhachSan}">Loại khách sạn</p>
                                                            <p class="mb-2">
                                                                Giáp biển: <span th:text="${khachSan.giapBien ? 'Có' : 'Không'}">Không</span>
                                                            </p>
                                                            <p class="card-text text-muted" th:text="${khachSan.moTa}">Mô tả</p>
                                                        </div>
                                                        <div class="text-end">
                                                            <div class="rating-stars fs-4" th:text="${khachSan.danhGia} + ' ★'">5 ★</div>
                                                            <small class="text-muted" th:text="${khachSan.danhGia == 0 ? 'Bình thường' : 
                                                                   khachSan.danhGia == 1 ? 'Khá ổn' :
                                                                   khachSan.danhGia == 2 ? 'Chất lượng' :
                                                                   khachSan.danhGia == 3 ? 'Sang trọng' :
                                                                   khachSan.danhGia == 4 ? 'Tuyệt vời' : 'Xuất sắc'}">Xuất sắc</small>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        
                        <div class="text-center py-5" th:if="${danhSachKhachSan == null or danhSachKhachSan.empty}">
                            <i class="fas fa-search fa-3x text-muted mb-3"></i>
                            <h4 class="text-muted">Không tìm thấy khách sạn nào</h4>
                            <p class="text-muted">Vui lòng thử lại với từ khóa khác</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        // Filter functionality
        document.addEventListener('DOMContentLoaded', function() {
            const filterCheckboxes = document.querySelectorAll('.filter-checkbox');
            filterCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    // Implement AJAX filtering here if needed
                    console.log('Filter changed:', this.name, this.value, this.checked);
                });
            });
        });
    </script>
</body>
</html>